Version 4
SHEET 1 1056 680
WIRE -64 -592 -256 -592
WIRE 384 -592 208 -592
WIRE 432 -592 384 -592
WIRE 560 -592 512 -592
WIRE 608 -592 560 -592
WIRE 736 -592 688 -592
WIRE -368 -560 -368 -592
WIRE -368 -512 -368 -560
WIRE 288 -496 288 -512
WIRE 640 -496 640 -512
WIRE -160 -480 -160 -496
WIRE 208 -480 208 -592
WIRE 256 -480 208 -480
WIRE 560 -480 560 -592
WIRE 608 -480 560 -480
WIRE 640 -480 640 -496
WIRE -256 -464 -256 -592
WIRE -192 -464 -256 -464
WIRE 384 -464 384 -592
WIRE 384 -464 320 -464
WIRE 736 -464 736 -592
WIRE 736 -464 672 -464
WIRE 800 -464 736 -464
WIRE -1024 -448 -1024 -528
WIRE -64 -448 -64 -592
WIRE -64 -448 -128 -448
WIRE 0 -448 -64 -448
WIRE 144 -448 80 -448
WIRE 256 -448 144 -448
WIRE 608 -448 560 -448
WIRE -192 -432 -368 -432
WIRE 560 -432 560 -448
WIRE 640 -432 640 -448
WIRE 800 -432 800 -464
WIRE 144 -416 144 -448
WIRE -1024 -320 -1024 -368
WIRE -368 -320 -368 -352
WIRE -160 -320 -160 -416
WIRE 144 -320 144 -352
WIRE 288 -320 288 -432
WIRE 560 -320 560 -352
WIRE 640 -320 640 -432
WIRE 800 -320 800 -352
WIRE -672 -32 -800 -32
WIRE -448 -32 -496 -32
WIRE -304 -32 -368 -32
WIRE -240 -32 -304 -32
WIRE -112 -32 -160 -32
WIRE 368 -32 192 -32
WIRE 432 -32 368 -32
WIRE 560 -32 512 -32
WIRE 608 -32 560 -32
WIRE 736 -32 688 -32
WIRE -496 0 -496 -32
WIRE -672 16 -672 -32
WIRE 272 64 272 48
WIRE 640 64 640 48
WIRE -1024 80 -1024 0
WIRE -208 80 -208 64
WIRE 192 80 192 -32
WIRE 240 80 192 80
WIRE 560 80 560 -32
WIRE 608 80 560 80
WIRE 640 80 640 64
WIRE -304 96 -304 -32
WIRE -240 96 -304 96
WIRE 368 96 368 -32
WIRE 368 96 304 96
WIRE 736 96 736 -32
WIRE 736 96 672 96
WIRE 800 96 736 96
WIRE -112 112 -112 -32
WIRE -112 112 -176 112
WIRE -16 112 -112 112
WIRE 128 112 64 112
WIRE 240 112 128 112
WIRE 608 112 560 112
WIRE -672 128 -672 96
WIRE -240 128 -672 128
WIRE 560 128 560 112
WIRE 640 128 640 112
WIRE 800 128 800 96
WIRE 128 144 128 112
WIRE -1024 208 -1024 160
WIRE -800 240 -800 -32
WIRE -672 240 -672 208
WIRE -672 240 -800 240
WIRE -208 240 -208 144
WIRE 128 240 128 208
WIRE 272 240 272 128
WIRE 560 240 560 208
WIRE 640 240 640 128
WIRE 800 240 800 208
WIRE -672 288 -672 240
FLAG 640 48 V+
FLAG 640 240 0
FLAG -1024 208 0
FLAG 560 240 0
FLAG -1024 0 V+
FLAG 800 240 0
FLAG 272 240 0
FLAG 272 48 V+
FLAG -208 64 V+
FLAG -208 240 0
FLAG -496 0 0
FLAG 128 240 0
FLAG -672 288 0
FLAG 640 -512 V+
FLAG 640 -320 0
FLAG 560 -320 0
FLAG 800 -320 0
FLAG 288 -320 0
FLAG 288 -512 V+
FLAG 144 -320 0
FLAG -160 -496 V+
FLAG -160 -320 0
FLAG -368 -320 0
FLAG -368 -560 V200+
FLAG -1024 -320 0
FLAG -1024 -528 V200+
SYMBOL voltage -1024 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res 784 112 R0
SYMATTR InstName R1
SYMATTR Value 1Meg
SYMBOL res 704 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 528 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL voltage 560 112 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 0.9
SYMBOL OpAmps\\AD823A 640 32 R0
SYMATTR InstName U2
SYMBOL OpAmps\\AD823A 272 32 R0
SYMATTR InstName U1
SYMBOL OpAmps\\AD823A -208 48 R0
SYMATTR InstName U3
SYMBOL res -144 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 18k
SYMBOL res -352 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 2k
SYMBOL res 80 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL cap 112 144 R0
SYMATTR InstName C1
SYMATTR Value 0.47µ
SYMBOL res -688 112 R0
SYMATTR InstName R7
SYMATTR Value 10m
SYMBOL current -672 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PULSE(0 {CURRENT_VALUE} 0 300n 300n {TRAN_DUTY} {TRAN_PERIOD})
SYMBOL res 784 -448 R0
SYMATTR InstName R8
SYMATTR Value 1Meg
SYMBOL res 704 -608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res 528 -608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL voltage 560 -448 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 0.9
SYMBOL OpAmps\\AD823A 640 -528 R0
SYMATTR InstName U4
SYMBOL OpAmps\\AD823A 288 -528 R0
SYMATTR InstName U5
SYMBOL cap 128 -416 R0
SYMATTR InstName C2
SYMATTR Value 0.47µ
SYMBOL res 96 -464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL OpAmps\\AD823A -160 -512 R0
SYMATTR InstName U6
SYMBOL res -384 -528 R0
SYMATTR InstName R12
SYMATTR Value 820k
SYMBOL res -384 -448 R0
SYMATTR InstName R13
SYMATTR Value 4.3k
SYMBOL voltage -1024 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V4
SYMATTR Value 0
TEXT -1072 408 Left 2 !;.dc i1 0 20 10m
TEXT -1072 440 Left 2 !;.tran 0 100000u 0u 10u
TEXT -672 440 Left 2 !.param PWM_FREQ=10k
TEXT -672 472 Left 2 !.param TRAN_PERIOD = {1 / PWM_FREQ}
TEXT -672 504 Left 2 !.param TRAN_DUTY = {TRAN_PERIOD*PWM_DUTY/100}
TEXT -672 536 Left 2 !.step param PWM_DUTY list 10 20 30 40 50 60 70 80 90 100
TEXT -672 408 Left 2 !.param CURRENT_VALUE = 10
TEXT -136 -120 Left 2 ;CURRENT_MEASUREMENT
TEXT -136 -664 Left 2 ;VOLTAGE_MEASUREMENT
TEXT -1048 -232 Left 2 !.dc v4 0 300 100m
