Version 4
SHEET 1 880 696
WIRE 128 16 -48 16
WIRE 368 16 128 16
WIRE -48 48 -48 16
WIRE 368 48 368 16
WIRE 128 64 128 16
WIRE -48 208 -48 176
WIRE 128 208 128 128
WIRE 368 272 368 128
WIRE 224 352 16 352
WIRE 320 352 224 352
WIRE 16 400 16 352
WIRE 224 400 224 352
WIRE 16 560 16 480
WIRE 224 560 224 480
WIRE 368 560 368 368
FLAG -48 208 0
FLAG 128 208 0
FLAG 368 560 0
FLAG 224 560 0
FLAG 16 560 0
SYMBOL EC370M-6-120FB_370_Wp -48 112 R0
SYMATTR InstName X1
SYMBOL res 352 32 R0
SYMATTR InstName R1
SYMATTR Value 17.63R
SYMBOL cap 112 64 R0
SYMATTR InstName C1
SYMATTR Value 660µ
SYMBOL res 208 384 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL voltage 16 384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -659 -9 Left 2
SYMATTR Value PULSE(0 12 0 0.1u 0.1u {TRAN_DUTY} {TRAN_PERIOD})
SYMATTR InstName V1
SYMBOL nmos 320 272 R0
SYMATTR InstName M1
SYMATTR Value IXFX90N30
TEXT -1232 408 Left 2 !.param SOLAR_PANEL_CURRENT=10.83
TEXT -1232 440 Left 2 !.param TRAN_PERIOD = {1 / PWM_FREQ}
TEXT -1232 376 Left 2 !.param PWM_FREQ = 10k
TEXT -1232 472 Left 2 !.param PWM_DUTY=99
TEXT -1232 504 Left 2 !.param TRAN_DUTY = {TRAN_PERIOD*PWM_DUTY/100}
TEXT -1224 640 Left 2 !.tran 0 300000u 299000u 500u
TEXT 304 -8 Left 2 ;voltage measure point
TEXT 368 416 Left 2 ;current measure point
TEXT 448 56 Left 2 ;HEATER
